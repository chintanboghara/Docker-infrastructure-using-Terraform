# Change infrastructure
### Step 1: Update the Configuration

Modify the `docker_container.nginx` resource in `main.tf` to:
1. Change the external port from `8000` to `8080`.
2. Add a `hostname` attribute.

```diff
resource "docker_container" "nginx" {
  image = docker_image.nginx.image_id
  name  = "nginx"
+ hostname = "terraform-docker"
  ports {
    internal = 80
-   external = 8000
+   external = 8080
  }
}
```

> ðŸ’¡ **Note**: The port change forces Terraform to replace the container because Docker containers cannot update ports in-place.

### Step 2: Apply Changes

Run `terraform apply` to deploy the changes:

```bash
terraform apply
```

Terraform will show an execution plan:
```diff
-/+ docker_container.nginx (new replacement required)
  ports {
    external = "8000" -> "8080" # Forces replacement
  }
```

Approve the plan by typing `yes`. Terraform will:
1. Destroy the old container.
2. Create a new container with the updated port and hostname.

## Expected Output

```
docker_container.nginx: Destroying... [id=589c6...]
docker_container.nginx: Destruction complete after 1s
docker_container.nginx: Creating...
docker_container.nginx: Creation complete after 1s [id=b2140...]

Apply complete! Resources: 1 added, 0 changed, 1 destroyed.
```

## How Terraform Manages Changes

- **`-/+`** in the plan indicates resource replacement.
- Immutable resources (like Docker containers with port changes) require recreation.
- Terraform auto-detects dependencies and applies changes safely.
